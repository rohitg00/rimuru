---
type: reference
title: Understanding Sessions
created: 2026-02-05
tags:
  - sessions
  - monitoring
  - history
related:
  - "[[agents]]"
  - "[[costs]]"
  - "[[cli-reference]]"
---

# Understanding Sessions

Sessions represent individual interactions with AI coding agents. Rimuru tracks sessions across all agents, providing unified history, statistics, and cost attribution.

## Session Lifecycle

```
┌─────────┐    ┌──────────┐    ┌───────────┐
│  Start  │───▶│  Active  │───▶│ Completed │
└─────────┘    └──────────┘    └───────────┘
     │              │               │
     │              ▼               │
     │         ┌─────────┐         │
     └────────▶│ Tracked │◀────────┘
               └─────────┘
```

A session includes:
- **Session ID**: Unique identifier (UUID)
- **Agent**: Which agent handled the session
- **Timing**: Start time, end time, duration
- **Usage**: Token counts (input/output)
- **Cost**: Calculated cost based on model pricing
- **Project**: Associated project path (if available)

## CLI Commands

### List Sessions

View all sessions:

```bash
rimuru sessions
```

View only active sessions:

```bash
rimuru sessions --active
```

Filter by agent type:

```bash
rimuru sessions --agent-type claude-code
```

Filter by agent name:

```bash
rimuru sessions --agent cursor-default
```

### Session History

View completed sessions:

```bash
rimuru sessions history
```

Limit results:

```bash
rimuru sessions history --limit 20
```

Filter by time range:

```bash
rimuru sessions history --range today
rimuru sessions history --range 7d
rimuru sessions history --range 30d
rimuru sessions history --range all
```

Available time ranges:
- `today` - Current day
- `yesterday` - Previous day
- `7d` or `week` - Last 7 days
- `30d` or `month` - Last 30 days
- `thismonth` - Current calendar month
- `lastmonth` - Previous calendar month
- `all` - All time

### Session Statistics

View aggregate statistics:

```bash
rimuru sessions stats
```

Filter by time range:

```bash
rimuru sessions stats --range 30d
```

Output includes:
- Total sessions
- Active sessions
- Completed sessions
- Total duration
- Average duration
- Total tokens
- Average tokens per session
- Total cost
- Average cost per session

### Show Session Details

View detailed information for a specific session:

```bash
rimuru sessions show <session-id>
```

Displays:
- Full session ID
- Agent name and type
- Status (Active/Completed)
- Start time and end time
- Duration
- Input and output tokens
- Model used
- Cost breakdown
- Project path

### JSON Output

For scripting and integration:

```bash
rimuru sessions --format json
rimuru sessions history --format json
rimuru sessions stats --format json
```

## Session Data

### Token Tracking

Rimuru tracks:
- **Input Tokens**: Tokens sent to the model (prompts, context)
- **Output Tokens**: Tokens generated by the model (responses)
- **Total Tokens**: Sum of input and output

Token counts are used for cost calculation based on model pricing.

### Cost Attribution

Session costs are calculated using:

```
Cost = (Input Tokens × Input Price) + (Output Tokens × Output Price)
```

Prices come from the model sync feature. See [[costs]] for cost tracking details.

### Project Association

When available, sessions are linked to project paths:
- Claude Code: Detected from working directory
- Cursor: From workspace settings
- Others: From session metadata

## TUI Session View

In the TUI (`rimuru-tui`), press `3` to access the Sessions view:

```
┌─ Sessions ─────────────────────────────────────────────────┐
│ Session ID   Agent          Duration   Tokens    Cost      │
├────────────────────────────────────────────────────────────┤
│ a1b2c3d4…   ⟁ claude-code   15m 32s   12.5K    $0.0234    │
│ e5f6g7h8…   ◫ cursor        8m 45s    8.2K     $0.0156    │
│ i9j0k1l2…   ◈ copilot       3m 12s    2.1K     $0.0042    │
└────────────────────────────────────────────────────────────┘
```

Navigation:
- `j/k` or arrows: Navigate list
- `Enter`: View session details
- `/`: Search sessions
- `f`: Toggle filters

## Filtering and Sorting

### CLI Filters

```bash
# Active only
rimuru sessions --active

# By agent type
rimuru sessions --agent-type codex

# By agent name
rimuru sessions --agent my-agent

# Combined
rimuru sessions --agent-type claude-code --active
```

### TUI Filters

Press `f` in the Sessions view to open the filter panel:

- **Status**: Active, Completed, All
- **Agent Type**: Filter by specific agent types
- **Time Range**: Today, This Week, This Month, All

### Sorting

Press `s` in the TUI to cycle through sort options:
- Start time (newest first)
- Duration (longest first)
- Tokens (most first)
- Cost (highest first)

## Session Aggregation

Rimuru aggregates sessions across all agents:

```
┌────────────────────────────────────────────────────────────┐
│                   Session Aggregator                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐                 │
│  │ Claude   │  │  Cursor  │  │ Copilot  │   ...           │
│  │ Sessions │  │ Sessions │  │ Sessions │                 │
│  └────┬─────┘  └────┬─────┘  └────┬─────┘                 │
│       │             │             │                        │
│       └─────────────┼─────────────┘                        │
│                     ▼                                      │
│          ┌─────────────────────┐                           │
│          │  Unified Sessions   │                           │
│          └─────────────────────┘                           │
└────────────────────────────────────────────────────────────┘
```

The aggregator provides:
- Combined session history
- Cross-agent statistics
- Unified cost reporting
- Time-based queries

## Data Storage

Sessions are stored in the PostgreSQL database:

```sql
CREATE TABLE sessions (
    id UUID PRIMARY KEY,
    agent_id UUID REFERENCES agents(id),
    started_at TIMESTAMPTZ NOT NULL,
    ended_at TIMESTAMPTZ,
    total_input_tokens BIGINT DEFAULT 0,
    total_output_tokens BIGINT DEFAULT 0,
    model_name VARCHAR(255),
    project_path TEXT,
    cost_usd DECIMAL(10, 6),
    is_active BOOLEAN DEFAULT true
);
```

Session data is updated in real-time as agents report activity.

## Related Topics

- [[agents]] - Managing AI agents
- [[costs]] - Cost tracking and reporting
- [[cli-reference]] - Complete CLI reference
- [[keyboard-shortcuts]] - TUI navigation
